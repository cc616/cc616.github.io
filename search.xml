<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>æ‰‹æŠŠæ‰‹çš„æ•™ä½ æ­å»ºhexoçš„å°ç™½blog</title>
    <url>/2020/05/22/hexo-blog/</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />

<p>ä½œä¸ºä¸€åæ¬ç –å·¥ï¼Œæ€ä¹ˆå¯èƒ½æ²¡æœ‰ä¸€ä¸ªè‡ªå·±çš„åšå®¢ï¼Œåœ¨ç½‘ä¸Šçœ‹è§åˆ«ä¸ªçš„blogå¤šä¹ˆçš„é…·ç‚«ã€‚å¿ƒæƒ³è‡ªå·±ä¹Ÿæä¸€ä¸ªå§ï¼Œä¸€æ¥å¯ä»¥å°†å¹³æ—¶ç§¯ç´¯çš„ç»éªŒè®°å½•æˆæ–‡æ¡£ï¼ŒäºŒæ¥ä¸‡ä¸€ä»¥åè·³æ§½ä¹Ÿæ˜¯ä¸€ä¸ªåŠ åˆ†é¡¹ã€‚äºæ˜¯ä¹åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€å¤§åœˆï¼Œäº”èŠ±å…«é—¨çš„ï¼Œæœ‰ç”¨è‡ªå·±æœåŠ¡å™¨æ­å»ºï¼Œä¸€å¬å¥½éº»çƒ¦ï¼Œè¿˜æœ‰è´­ä¹°æœåŠ¡å™¨ï¼Œå†çœ‹çœ‹è‡ªå·±çš„è·åŒ…ï¼ˆâ€ğŸ¤¦â€â™€ï¸ï¼‰ï¼Œæƒ³æƒ³è¿˜æ˜¯å…ˆæ‰¾ä¸ªå…è´¹çš„å§ã€‚è¿™ä¸ <code>Hexo</code> å¤šåˆé€‚å•Šï¼Œäºæ˜¯æ’¸èµ·è¢–å­å°±æ˜¯å¹²ã€‚ä¸€è·¯ä¸‹æ¥å‘ç°æ­å»ºä¹Ÿæ˜¯å¾ˆç®€å•çš„ï¼Œç°åœ¨æˆ‘å°±å°†æˆ‘æ­å»ºçš„è¿‡ç¨‹è®°å½•ä¸‹æ¥ã€‚<code>Hexo</code> æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒ <code>Markdown</code>ï¼Œç®€ç›´ä¸èƒ½å¤ªå®Œç¾</p>
<h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£…<a href="https://hexo.io/zh-cn/docs/">å®˜ç½‘</a>è„šæ‰‹æ¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure>

<h3 id="åˆå§‹åŒ–"><a href="#åˆå§‹åŒ–" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><p>ä½¿ç”¨å‘½ä»¤åˆå§‹åŒ–ä¸€ä¸ªåŸºç¡€é¡¹ç›®</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo init blog-demo</span><br></pre></td></tr></table></figure>

<p>ç”¨ç¼–è¾‘å™¨æ‰“å¼€ <code>blog-demo</code>ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é‡Œé¢ç›®å½•ç»“æ„</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-6daa79c34bdd3ea2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç›®å½•ç»“æ„.png"></p>
<p>å…¶ä¸­ï¼š<br><code>source</code> æ–‡ä»¶å¤¹ä¸»è¦æ”¾æˆ‘ä»¬ <code>Markdown</code> æ–‡æ¡£ï¼Œ<code>themes</code> æ–‡ä»¶å¤¹ä¸»è¦æ˜¯ç½‘ç«™ä¸»é¢˜ç›¸å…³çš„ï¼Œ<code>_config.yml</code> ä¸»è¦æ˜¯ä¸€äº›é…ç½®é¡¹<br>ç„¶åæˆ‘ä»¬ä½¿ç”¨ <code>hexo s</code>ï¼ˆ<code>hexo server</code> çš„ç®€å†™ï¼Œ<a href="https://hexo.io/zh-cn/docs/commands">å®˜ç½‘</a>æœ‰è®¸å¤šå‘½ä»¤ï¼‰ å¯åŠ¨é¡¹ç›®ï¼Œæ‰“å¼€ <a href="http://localhost:4000/">http://localhost:4000/</a> å°±èƒ½çœ‹è§ç½‘ç«™è¿è¡Œèµ·æ¥äº†</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-7b63303cf296d367.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="blog.png"></p>
<h3 id="ä¸»é¢˜ä¿®æ”¹"><a href="#ä¸»é¢˜ä¿®æ”¹" class="headerlink" title="ä¸»é¢˜ä¿®æ”¹"></a>ä¸»é¢˜ä¿®æ”¹</h3><p>æœ€ç®€å•çš„blogå°±å·²ç»å¥½äº†ï¼Œä½†æ˜¯å‘ç°å¥½åƒé£æ ¼ç»™è‡ªå·±æƒ³è±¡çš„ä¸ä¸€æ ·ï¼Œä¸è¿‡æ²¡æœ‰å…³ç³»ï¼Œ<code>hexo</code> æ”¯æŒä¿®æ”¹ä¸»é¢˜ï¼Œ<a href="https://hexo.io/zh-cn/docs/themes">å®˜ç½‘</a>ä¹Ÿæœ‰å…·ä½“è¯´æ˜ï¼Œå½“ç„¶ç½‘ä¸Šä¹Ÿæœ‰å¾ˆå¤šæˆç†Ÿçš„ä¸»é¢˜æ’ä»¶äº†ï¼Œä½ å¯ä»¥ä¸‹è½½ä¸‹æ¥ç›´æ¥ä½¿ç”¨ï¼Œæ¯”å¦‚<a href="https://www.zhihu.com/question/24422335">çŸ¥ä¹</a>ä¸Šå°±åˆ—ä¸¾äº†å¾ˆå¤šï¼Œä¸‹é¢æˆ‘ä»¬å°±ä½¿ç”¨ <code>next</code> çš„ä¸»é¢˜</p>
<h4 id="å®‰è£…ä¸»é¢˜æ’ä»¶"><a href="#å®‰è£…ä¸»é¢˜æ’ä»¶" class="headerlink" title="å®‰è£…ä¸»é¢˜æ’ä»¶"></a>å®‰è£…ä¸»é¢˜æ’ä»¶</h4><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­çš„ <code>theme</code> å­—æ®µ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">theme: next</span><br></pre></td></tr></table></figure>

<p>æ¥ç€æˆ‘ä»¬éœ€è¦cloneä¸€ä»½ <code>next</code> ä¸»é¢˜åˆ° <code>theme</code> æ–‡ä»¶å¤¹ä¸‹</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/next-theme/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å†é‡å¯ä¸€ä¸‹æœåŠ¡ï¼Œå°±ä¼šå‘ç°ç•Œé¢å·²ç»ä¿®æ”¹äº†</p>
<h4 id="ä¿®æ”¹ä¸»é¢˜é…ç½®"><a href="#ä¿®æ”¹ä¸»é¢˜é…ç½®" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é…ç½®"></a>ä¿®æ”¹ä¸»é¢˜é…ç½®</h4><p>å°½ç®¡ä¸»é¢˜ä¿®æ”¹äº†ï¼Œä½†æ˜¯è¿˜æ˜¯ä¸æ˜¯å¾ˆç¬¦åˆè‡ªå·±çš„é¢„æœŸã€‚åˆ«æ€¥ï¼Œ<code>next</code> ä¹Ÿæ”¯æŒä¿®æ”¹é…ç½®ï¼Œå…¶ä¸»è¦å°±æ˜¯ä¿®æ”¹ <code>next</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶</p>
<ul>
<li>ä¿®æ”¹å¸ƒå±€</li>
</ul>
<p>å°†ä¸Šä¸‹æ”¹æˆå·¦å³</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-3e209944b077eb53.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¸ƒå±€.png"></p>
<p>å°†èœå•æ æ”¾åœ¨å³è¾¹</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-2625f9c9ab29f088.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="èœå•æ .png"></p>
<p>æˆ‘ä»¬åœ¨ä¿®æ”¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ <code>hexo s --debug</code> æ¥æ”¯æŒçƒ­æ›´æ–°ï¼Œé¿å…æ¯æ¬¡ä¿®æ”¹éƒ½é‡å¯æœåŠ¡å™¨</p>
<ul>
<li>ä¿®æ”¹è¯­è¨€</li>
</ul>
<p>æˆ‘ä»¬å°†è¯­è¨€åˆ‡æ¢æˆä¸­æ–‡ï¼Œå¦‚æœé…ç½®æ–‡ä»¶ä¸­æ²¡æœ‰ <code>language</code> å¯è‡ªè¡ŒåŠ ä¸Š</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-c0c7588764fb1e52.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ä¸­æ–‡.png"></p>
<p>ä½†æ˜¯å…‰ä¿®æ”¹ <code>next</code> é‡Œé¢çš„é…ç½®æ˜¯ä¸è¡Œçš„ï¼Œè¿˜éœ€è¦ä¿®æ”¹æ ¹ç›®å½•ä¸‹ <code>hexo</code> çš„é…ç½®ï¼ŒåŒæ ·å°†è¯­è¨€ä¿®æ”¹æˆ <code>language: zh-CN</code></p>
<ul>
<li>æ·»åŠ å‹æƒ…é“¾æ¥</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-534de919d00e5602.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å‹æƒ…é“¾æ¥.png"></p>
<ul>
<li>æ·»åŠ å¤´åƒ</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-4a0d7bcdf267bfe0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¤´åƒ.png"></p>
<ul>
<li>æ”¯æŒæ‰“èµ</li>
</ul>
<p>å°†ä½ çš„å¾®ä¿¡æ”¯ä»˜å®æ”¶æ¬¾äºŒç»´ç å›¾ç‰‡æ”¾åœ¨ <code>source</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>images</code> æ–‡ä»¶å¤¹ä¸‹ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥å¦èµ·ç›®å½•ï¼Œä½†è¦ä¸»è¦å¼•ç”¨æ—¶çš„è·¯å¾„</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-1fd1d8c3a4fdbfc2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ‰“èµ.png"></p>
<p><strong>æ³¨æ„</strong>ï¼šå¦‚æœä½ çš„nextç‰ˆæœ¬ä¸æ˜¯æœ€æ–°ï¼Œå¯èƒ½ä¼šå½“é¼ æ ‡æ”¾ä¸Šå»åï¼Œä¸‹é¢çš„æ–‡å­—åœ¨è½¬åœˆï¼Œæ„Ÿè§‰å¥½æ™ƒğŸ‘€ï¼Œå¯ä»¥ä¿®æ”¹ä¸€ä¸‹å®ƒçš„æ ·å¼ã€‚åœ¨ <code>source</code> -&gt; <code>css</code> -&gt; <code>_common</code> -&gt; <code>components</code> -&gt; <code>post</code> -&gt; <code>post-reward.styl</code>ï¼Œä¿®æ”¹å®ƒçš„æ ·å¼å°±å¯ä»¥äº†ï¼Œåˆ é™¤æˆ–è€…æ³¨é‡Šéƒ½å¯ä»¥</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-349a11d12fe561d4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ”¯ä»˜æ ·å¼.png"></p>
<ul>
<li>æ·»åŠ èœå•</li>
</ul>
<p>æˆ‘ä»¬å¯ä»¥æ–°å¢ä¸€äº›èœå•ï¼Œéœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„ <code>source</code> æ–‡ä»¶å¤¹ä¸‹æ–°å»ºå¯¹åº”çš„æ–‡ä»¶ã€‚æ¯”å¦‚æ–°å¢ä¸€ä¸ªâ€œå…³äºæˆ‘â€çš„èœå•ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦åœ¨ <code>source</code> æ–‡ä»¶å¤¹æ–°å»ºä¸€ä¸ª <code>about</code> çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å†æ–°å»ºä¸€ä¸ª  <code>index.md</code> æ–‡ä»¶å°±å¯ä»¥ä»‹ç»è‡ªå·±äº†ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨ <code>hexo</code>  å‘½ä»¤ç”Ÿæˆæ–°çš„é¡µé¢ï¼Œeg <code>hexo new  page &quot;archives&quot;</code>ï¼‰ï¼›ç„¶åå†ä¿®æ”¹èœå•é…ç½®</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-85d8c797b03053db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="èœå•.png"></p>
<ul>
<li>é¦–é¡µæ–‡ç« ç¯‡å¹…é™åˆ¶</li>
</ul>
<p>è¿™è¦çœ‹ä½ çš„ <code>next</code> ç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Œåœ¨ç‰ˆæœ¬ <code>v7.6.0</code> ä»¥å‰æœ‰ä¸ªå­—æ®µ <code>auto_excerpt</code> å¯ä»¥è‡ªåŠ¨æˆªæ–­æ–‡ç« å†…å®¹ä½œä¸ºæ‘˜è¦ï¼Œä½†åœ¨åé¢çš„ç‰ˆæœ¬ï¼Œå®˜æ–¹ä¸æ”¯æŒï¼Œå»ºè®®è®¾ç½® <code>excerpt_description</code></p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-6efd9c390239ed74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å¼€å¯ç¯‡å¹…è®¾ç½®.png"></p>
<p>ä¸€ç§æ–¹å¼ï¼Œä½ å¯ä»¥åœ¨ä½ çš„æ–‡ç« è¦æˆªæ–­çš„åœ°æ–¹åŠ ä¸Š <code>&lt;!-- more --&gt;</code></p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-b063da81088d0f60.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ·»åŠ æ›´å¤š.png"></p>
<p>å¦å¤–ä¸€ç§æ–¹å¼ç»™æ¯ç¯‡æ–‡ç« å†™ <code>description</code>ï¼Œè¿™ç§æ–¹å¼åœ¨è¯¦æƒ…é¡µé¢ï¼Œæ‘˜è¦æ˜¾ç¤ºçš„å­—ä½“ä¼šå¾ˆå°</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-e117c63ffa8c2274.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png"></p>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤šå…¶ä»–çš„é…ç½®ï¼Œä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦å»ä¿®æ”¹ï¼Œè¿™é‡Œå°±ä¸åœ¨ä¸€ä¸€ä¸¾ä¾‹äº†</p>
<h4 id="ä¿®æ”¹é¦–é¡µé…ç½®"><a href="#ä¿®æ”¹é¦–é¡µé…ç½®" class="headerlink" title="ä¿®æ”¹é¦–é¡µé…ç½®"></a>ä¿®æ”¹é¦–é¡µé…ç½®</h4><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨é¦–é¡µåŠ ä¸Šä¸€äº›ç®€ä»‹ï¼Œä¿®æ”¹è¯­è¨€ç­‰ï¼›è¿™ä¸ªæ˜¯ä¿®æ”¹æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-d7a58073cbc66a17.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é¦–é¡µ.png"></p>
<h3 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h3><h4 id="æ–°å»ºä»“åº“"><a href="#æ–°å»ºä»“åº“" class="headerlink" title="æ–°å»ºä»“åº“"></a>æ–°å»ºä»“åº“</h4><p>ç°åœ¨åšå®¢å·²ç»å­µåŒ–å‡ºæ¥äº†å°é²œç‰ˆï¼Œæ˜¯æ—¶å€™éƒ¨ç½²ä¸Šå»ä½“éªŒäº†ï¼›ä¸€å¬éƒ¨ç½²ï¼Œæ˜¯ä¸æ˜¯å°±éœ€è¦æœåŠ¡å™¨ä¸åŸŸåå•Šï¼Œå®Œäº†æˆ‘å•¥ä¹Ÿæ²¡æœ‰ï¼›æ²¡å…³ç³»ï¼Œå…¨çƒæœ€å¤§çš„åŒæ€§äº¤å‹ç½‘ç«™ <code>github</code> å°±æ˜¯ä½ æœ€å¥½çš„é€‰æ‹©ã€‚é¦–å…ˆï¼Œä½ éœ€è¦æœ‰ä¸ªä¸€ä¸ª <code>github</code> è´¦å·ï¼ˆå¦‚æœæ²¡æœ‰å°±ç”³è¯·ä¸€ä¸ªï¼‰ï¼Œç„¶åæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œè¿™ä¸ªä»“åº“çš„åå­—ä¸€å®šè¦å’Œä½   <code>github</code> è´¦å·ç›¸åŒã€‚æ¯”å¦‚æˆ‘çš„ <code>github</code>  å« <code>cc616</code>ï¼ˆä¸æ˜¯æ˜µç§°ï¼‰ï¼Œé‚£ä¹ˆå°±éœ€è¦å»ºä¸€ä¸ªä»“åº“åä¸º <code>cc616.github.io</code>ï¼Œè¿™æ ·ä»“åº“å°±å»ºå¥½äº†ã€‚æ¥ç€ä½ éœ€è¦ä¿®æ”¹è¯¥ä»“åº“çš„è®¾ç½®</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-3f9b01437ee00084.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="ç‚¹å‡»è®¾ç½®.png"></p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-cf9f66a2f52f6d8d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é…ç½®.png"></p>
<p>è¿™æ ·ä½ å°±å¯ä»¥é€šè¿‡Â <a href="https://cc616.github.io/">https://cc616.github.io/</a>è®¿é—®ä½ çš„ç½‘ç«™äº†</p>
<h4 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h4><p>ä»“åº“å»ºå¥½äº†ï¼Œæˆ‘ä»¬éœ€è¦æ–°åŠ ä¸€ä¸ªåŒ…</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>_config.yml</code> é‡Œé¢çš„éƒ¨ç½²é…ç½®</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-81f8ffdea7ab4e8e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="éƒ¨ç½².png"></p>
<p>è¿™æ ·æˆ‘ä»¬æ¯æ¬¡æ–°å¢äº†æ–‡ç« åï¼Œå°±å¯ä»¥ä½¿ç”¨å‘½ä»¤ <code>hexo d</code> ä¸€é”®éƒ¨ç½²åˆ°GitHub Pages ä¸Šäº†</p>
<h3 id="é‡åˆ°çš„å‘"><a href="#é‡åˆ°çš„å‘" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h3><h4 id="å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥"><a href="#å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥" class="headerlink" title="å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥"></a>å›¾ç‰‡æ˜¾ç¤ºä¸å‡ºæ¥</h4><p>ä½ çš„å›¾ç‰‡åœ¨å…¶ä»–ç½‘ç«™éƒ½èƒ½æ˜¾ç¤ºï¼Œä½†æ˜¯ä½ æ”¾åœ¨è¿™é‡Œå°±æ˜¾ç¤ºå¤±è´¥ï¼Œå¯èƒ½å°±éœ€è¦åœ¨æ–‡ç« å¼€å¤´åŠ ä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;meta name=&quot;referrer&quot; content=&quot;no-referrer&quot; /&gt;</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/9217526-db40af341bb68aae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å›¾ç‰‡æ˜¾ç¤ºé—®é¢˜.png"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>hexo</code> æ­å»ºåšå®¢çœŸçš„æ˜¯ç®€å•æ–¹ä¾¿ï¼Œä¸€è·¯ä¸‹æ¥æˆ‘ä¹Ÿå°±èŠ±äº†ä¸€å¤©ä¸åˆ°çš„æ—¶é—´ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å¾€é‡Œé¢å¡«å……è‡ªå·±ç´¯ç§¯èµ·æ¥çš„çŸ¥è¯†äº†ã€‚å…¶å®è¿™ç¯‡æ–‡ç« æ—©åœ¨ä¸¤å¹´å‰å°±è¯¥å†™äº†ï¼Œä½†æ˜¯è‡ªå·±è§‰å¾—è¿™ä¹ˆç®€å•ï¼Œæ²¡æœ‰ä»€ä¹ˆå¥½è®°å½•ã€‚æœ€è¿‘é‡æ–°æ¡èµ·å†™åšå®¢ï¼Œæ‰å‘ç°è‡ªå·±çš„æ­çš„blogæ—©å·²ä¸çŸ¥é“åœ¨å“ªé‡Œäº†ï¼Œç½‘ç«™ä¸Šä¹Ÿåªæœ‰é‚£ä¹ˆä¸¤ç¯‡æ–‡ç« ï¼Œè¯´æ¥ä¹Ÿæƒ­æ„§ã€‚æ­£å¥½è‡ªå·±é‡æ–°æ­å»ºäº†ï¼Œæ‰€ä»¥å°±æŠŠè®°å½•ä¸‹æ¥äº†ï¼Œå¸Œæœ›å¯¹ä½ æœ‰ç”¨ã€‚ä¸è¿‡è¿™ä¸ªæœ‰ä¸ªç¼ºç‚¹å°±æ˜¯ä½ éœ€è¦è‡ªå·±çš„å›¾åºŠï¼Œç”¨ä¸ƒç‰›äº‘æ­å»ºä¸€ä¸ªä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘æ›¾ç»ä¹Ÿæ­å»ºè¿‡ï¼Œæ”¹å¤©å†å†™å‡ºæ¥å§ã€‚å¦‚æœä½ å«Œéº»çƒ¦ï¼Œå¯ä»¥ä½¿ç”¨ç½‘ä¸Šä¸€äº›ç°æˆçš„ï¼Œä¹Ÿå¯ä»¥åƒæˆ‘ä¸€èˆ¬æŠŠæ–‡ç« å†™åœ¨ç®€ä¹¦ä¸Šï¼Œæ—¢å¯ä»¥æé«˜æ–‡ç« å®£ä¼ æ¸ é“ï¼Œä¹Ÿå¯ä»¥æœ‰å›¾åºŠå•¦ğŸ¤¦â€â™€ï¸</p>
]]></content>
      <categories>
        <category>Front-end</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>blog</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>dockerå…¥é—¨ä¹‹mysql</title>
    <url>/2020/05/21/docker-mysql/</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />

<p>dockerç«äº†é‚£ä¹ˆä¹…ï¼Œè‡ªå·±åœ¨å¹³æ—¶ä¹Ÿå¸¸å¸¸å¬åˆ«äººè¯´dockeræ€ä¹ˆæ€ä¹ˆæ ·ï¼ˆå‡è£…èƒ½å¬æ‡‚çš„æ ·å­ï¼‰ï¼Œåæ¥è¿˜æ˜¯å†³å®šè‡ªå·±æ’¸èµ·è¢–å­å°±å¼€å¹²ï¼Œå› ä¸ºè‡ªå·±å¹³æ—¶ä¹Ÿæœ‰ç»ƒä¹ ä¸€äº›å°é¡¹ç›®ï¼Œæ–­æ–­ç»­ç»­çš„ï¼Œå½“æ—¶è§£å†³äº†ï¼Œåæ¥éš”æ–­æ—¶é—´ä¸ç”¨å°±åˆå¿˜è®°äº†ï¼Œä¿—è¯è¯´å¥½è®°æ€§ä¸å¦‚çƒ‚ç¬”å¤´ï¼Œè¿™æ¬¡å°±æŠŠå®è·µçš„å…¨éƒ¨è®°ä¸‹æ¥äº†ï¼Œä»¥é˜²æœªæ¥åˆå¿˜è®°äº†ï¼ˆğŸ¤¦â€â™€ï¸ï¼‰</p>
<h3 id="å‡†å¤‡æ­¥éª¤"><a href="#å‡†å¤‡æ­¥éª¤" class="headerlink" title="å‡†å¤‡æ­¥éª¤"></a>å‡†å¤‡æ­¥éª¤</h3><h4 id="å®‰è£…-docker"><a href="#å®‰è£…-docker" class="headerlink" title="å®‰è£… docker"></a>å®‰è£… <code>docker</code></h4><p>ä½ è¦ç”¨dockerï¼Œé‚£ä¹ˆä¸‰éƒ¨æ›²æ— å¤–ä¹å°±æ˜¯å®‰è£…ï¼Œç¼–ç ï¼Œè¿è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬é¦–å…ˆæ¥å®‰è£… <code>docker</code>ã€‚å®‰è£… <code>docker</code> æœ‰å¾ˆå¤šç§æ–¹å¼ï¼Œç½‘ä¸Šæ•™ç¨‹ä¹Ÿæ˜¯äº”èŠ±å…«é—¨ï¼›è¿™é‡Œå°±è·³è¿‡ï¼Œæ¯•ç«Ÿç½‘ä¸Šä¸€å¤§æŠŠï¼Œè´´ä¸€ä¸ªèœé¸Ÿçš„<a href="https://www.runoob.com/docker/macos-docker-install.html">æ•™ç¨‹</a><br><code>docker</code> å®‰è£…å¥½äº†ï¼Œå°±å¯ä»¥ä½¿ç”¨ç®€å•çš„å‘½ä»¤å»æŸ¥çœ‹äº†ï¼›å¸¸ç”¨çš„æœ‰ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker images  // æŸ¥çœ‹å½“å‰æœ¬åœ°é•œåƒ</span><br><span class="line">docker pull imagename  // è·å–ä¸€ä¸ªæ–°é•œåƒ</span><br><span class="line">docker search imagename  // æŸ¥æ‰¾ä¸€ä¸ªé•œåƒ</span><br><span class="line">docker rmi images-id  // åˆ é™¤ä¸€ä¸ªé•œåƒ</span><br><span class="line">docker image prune --force --all  // åˆ é™¤æ‰€æœ‰ä¸ä½¿ç”¨çš„é•œåƒ</span><br><span class="line">docker ps -a // æŸ¥çœ‹å®¹å™¨</span><br><span class="line">docker rm container-id // åˆ é™¤å®¹å™¨</span><br><span class="line">docker stop container-id // åœæ­¢å®¹å™¨</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶è¿˜æœ‰å¾ˆå¤š <code>docker build</code>ã€<code>docker run</code> ç­‰å‘½ä»¤ï¼Œå¯ä»¥å»æŸ¥é˜…å…¶å…·ä½“ç”¨æ³•</p>
<h4 id="æ‹‰å–é•œåƒ"><a href="#æ‹‰å–é•œåƒ" class="headerlink" title="æ‹‰å–é•œåƒ"></a>æ‹‰å–é•œåƒ</h4><p><code>docker</code> å®‰è£…å¥½äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨å‘½ä»¤å»è·å–ä¸€ä¸ª <code>mysql</code> çš„é•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker pull mysql:5.6</span><br></pre></td></tr></table></figure>
<p><em>note</em><br><code>:5.6</code>ï¼šè¡¨ç¤ºç‰ˆæœ¬<br>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨æŸ¥çœ‹å‘½ä»¤å°±å¯ä»¥çœ‹åˆ°è¯¥é•œåƒå·²ç»åœ¨æœ¬åœ°äº†<br><img src="https://upload-images.jianshu.io/upload_images/9217526-88f709f1aaf21113.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æŸ¥çœ‹é•œåƒ.png"></p>
<h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p><code>docker</code> å®‰è£…å¥½äº†ï¼Œé•œåƒä¹Ÿè·å–äº†ï¼Œé‚£ä¹ˆç°åœ¨å°±å¯ä»¥åŸºäºè¯¥é•œåƒèµ·ä¸€ä¸ªå®¹å™¨äº†</p>
<h4 id="è¿è¡Œå®¹å™¨"><a href="#è¿è¡Œå®¹å™¨" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -itd --name some-mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=my-secret-pw -d mysql:5.6</span><br></pre></td></tr></table></figure>
<p><em>note</em>ï¼š</p>
<ol>
<li><code>-itd</code>: <code>-i</code> ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ <code>-t</code> åŒæ—¶ä½¿ç”¨ï¼›<code>-t</code> ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ <code>-i</code> åŒæ—¶ä½¿ç”¨ï¼›<code>-d</code> åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨ID</li>
<li><code>--name [name]</code>ï¼šå®¹å™¨åç§°</li>
<li><code>-p 3306:3306</code> ï¼šæ˜ å°„å®¹å™¨æœåŠ¡çš„ <code>3306</code> ç«¯å£åˆ°å®¿ä¸»æœºçš„ <code>3306</code> ç«¯å£ï¼Œå¤–éƒ¨ä¸»æœºå¯ä»¥ç›´æ¥é€šè¿‡ <code>å®¿ä¸»æœºip:3306</code> è®¿é—®åˆ° <code>mysql</code> çš„æœåŠ¡ã€‚</li>
<li><code>-e MYSQL_ROOT_PASSWORD=my-secret-pw</code>ï¼šè®¾ç½® <code>mysql</code> æœåŠ¡ <code>root</code> ç”¨æˆ·çš„å¯†ç ã€‚<br>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬ä½¿ç”¨æŸ¥çœ‹å®¹å™¨å‘½ä»¤ï¼Œå°±å¯ä»¥çœ‹è§è¯¥å®¹å™¨å·²ç»è¿è¡Œèµ·æ¥äº†</li>
<li><code>-d mysql:[version]</code>ï¼šè¿™é‡ŒæŒ‡åŸºäºå“ªä¸ªç‰ˆæœ¬çš„é•œåƒæ¥ç”Ÿæˆå®¹å™¨</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-a1f30260513bac74.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æŸ¥çœ‹å®¹å™¨.png"></p>
<h4 id="è¿›å…¥å®ä¾‹"><a href="#è¿›å…¥å®ä¾‹" class="headerlink" title="è¿›å…¥å®ä¾‹"></a>è¿›å…¥å®ä¾‹</h4><p>å®¹å™¨å·²ç»è¿è¡Œèµ·æ¥äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å‘½ä»¤è¿›å…¥åˆ°å®ä¾‹é‡Œ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker exec -it container-name bash</span><br></pre></td></tr></table></figure>
<p>ç„¶åè¾“å…¥  <code>mysql -uroot -p</code> è¾“å…¥æˆ‘ä»¬åˆšåˆšè®¾ç½®çš„å¯†ç ï¼Œå°±èƒ½æ­£å¸¸æ“ä½œæ•°æ®åº“äº†</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-d131d67be14cd0a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ•°æ®åº“.png"></p>
<p>è¿™æ ·æˆ‘ä»¬å°±åŸºäºå®˜æ–¹ <code>mysql</code> é•œåƒï¼Œè¿è¡Œèµ·äº†ä¸€ä¸ªæ•°æ®åº“å®ä¾‹ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ•°æ®åº“å®¢æˆ·ç«¯å»è¿æ¥è¯¥æ•°æ®åº“ï¼Œä¸è¿‡å¦‚æœä½ æ˜¯åŸºäºæœ€æ–°çš„æ•°æ®åº“åˆ›å»ºçš„å®ä¾‹ï¼Œè¿æ¥å¯èƒ½ä¼šå¤±è´¥ï¼Œè¯´æ‰¾ä¸åˆ°<code>image not found</code>ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦è¿›å…¥ <code>mysql</code> å®ä¾‹å»ä¿®æ”¹ä¸‹å¯†ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;root&#x27;;</span><br></pre></td></tr></table></figure>

<h3 id="æ•°æ®åˆå§‹åŒ–"><a href="#æ•°æ®åˆå§‹åŒ–" class="headerlink" title="æ•°æ®åˆå§‹åŒ–"></a>æ•°æ®åˆå§‹åŒ–</h3><p>è™½ç„¶ä¸Šé¢æˆ‘ä»¬å·²ç»ç”Ÿæˆäº†æ•°æ®åº“å®ä¾‹ï¼Œä½†æ˜¯åœ¨å®é™…ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹ä¸­å°±èƒ½åˆå§‹åŒ–æˆ‘ä»¬å†™å¥½çš„ <code>sql</code> è„šæœ¬ï¼Œåˆšå¥½ <code>mysql</code> çš„å®˜æ–¹é•œåƒå¯ä»¥æ”¯æŒåœ¨å®¹å™¨å¯åŠ¨çš„æ—¶å€™è‡ªåŠ¨æ‰§è¡ŒæŒ‡å®šçš„ <code>sql</code> è„šæœ¬æˆ–è€… <code>shell</code> è„šæœ¬ï¼Œæˆ‘ä»¬èƒ½çœ‹è§å®˜æ–¹é•œåƒä¸­ <code>Dockerfile</code> éƒ¨åˆ†ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">COPY docker-entrypoint.sh /usr/local/bin/</span><br><span class="line">RUN ln -s usr/local/bin/docker-entrypoint.sh /entrypoint.sh # backwards compat</span><br><span class="line">ENTRYPOINT [&quot;docker-entrypoint.sh&quot;]</span><br><span class="line"></span><br><span class="line">EXPOSE 3306</span><br><span class="line">CMD [&quot;mysqld&quot;]</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾é‡Œé¢å·²ç»è®¾å®šäº† <code>ENTRYPOINT</code>ï¼Œä¼šè°ƒç”¨ <code>/entrypoint.sh</code> è¿™ä¸ªè„šæœ¬ï¼Œè„šæœ¬å…¶ä¸­ä¸€æ®µå†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo</span><br><span class="line">  for f in /docker-entrypoint-initdb.d/*; do</span><br><span class="line">  case &quot;$f&quot; in</span><br><span class="line">    *.sh)     echo &quot;$0: running $f&quot;; . &quot;$f&quot; ;;</span><br><span class="line">    *.sql)    echo &quot;$0: running $f&quot;; &quot;$&#123;mysql[@]&#125;&quot; &lt; &quot;$f&quot;; echo ;;</span><br><span class="line">    *.sql.gz) echo &quot;$0: running $f&quot;; gunzip -c &quot;$f&quot; | &quot;$&#123;mysql[@]&#125;&quot;; echo ;;</span><br><span class="line">    *)        echo &quot;$0: ignoring $f&quot; ;;</span><br><span class="line">  esac</span><br><span class="line">  echo</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<p>è¯´çš„æ˜¯ä¼šéå† <code>docker-entrypoint-initdb.d</code> ç›®å½•ä¸‹æ‰€æœ‰çš„ <code>.sh</code> å’Œ <code>.sql</code> åç¼€çš„æ–‡ä»¶å¹¶æ‰§è¡Œã€‚æ‰€ä»¥æˆ‘ä»¬çš„æ€è·¯æ˜¯å°†æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬æ‹·è´åˆ° <code>docker-entrypoint-initdb.d</code> ç›®å½•ä¸‹ã€‚é‚£ä¹ˆæ¥ä¸‹æ¥æˆ‘ä»¬å°±ç¼–å†™ <code>Dockerfile</code> æ–‡ä»¶</p>
<ul>
<li><p><code>Dockerfile</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#åŸºç¡€é•œåƒä½¿ç”¨ mysql:5.6</span><br><span class="line">FROM mysql:5.6</span><br><span class="line"></span><br><span class="line">#ä½œè€…</span><br><span class="line">MAINTAINER cc &lt;813659813@qq.com&gt;</span><br><span class="line"></span><br><span class="line">#å®šä¹‰å·¥ä½œç›®å½•</span><br><span class="line">ENV WORK_PATH /usr/local/work</span><br><span class="line"></span><br><span class="line">#å®šä¹‰ä¼šè¢«å®¹å™¨è‡ªåŠ¨æ‰§è¡Œçš„ç›®å½•</span><br><span class="line">ENV AUTO_RUN_DIR /docker-entrypoint-initdb.d</span><br><span class="line"></span><br><span class="line">#å®šä¹‰sqlæ–‡ä»¶å</span><br><span class="line">ENV FILE_0 init_table.sql </span><br><span class="line">ENV FILE_1 init_data.sql</span><br><span class="line"></span><br><span class="line">#å®šä¹‰shellæ–‡ä»¶å</span><br><span class="line">ENV INSTALL_DB_SHELL init_db.sh</span><br><span class="line"></span><br><span class="line">#åˆ›å»ºæ–‡ä»¶å¤¹</span><br><span class="line">RUN mkdir -p $WORK_PATH</span><br><span class="line"></span><br><span class="line">#æŠŠæ•°æ®åº“åˆå§‹åŒ–æ•°æ®çš„æ–‡ä»¶å¤åˆ¶åˆ°å·¥ä½œç›®å½•ä¸‹</span><br><span class="line">COPY ./$FILE_0 $WORK_PATH/</span><br><span class="line">COPY ./$FILE_1 $WORK_PATH/</span><br><span class="line"></span><br><span class="line">#æŠŠè¦æ‰§è¡Œçš„sqlæ–‡ä»¶æ”¾åˆ°/docker-entrypoint-initdb.d/ç›®å½•ä¸‹ï¼Œå®¹å™¨ä¼šè‡ªåŠ¨æ‰§è¡Œè¿™ä¸ªsql</span><br><span class="line">COPY ./$INSTALL_DB_SHELL $AUTO_RUN_DIR/</span><br><span class="line"></span><br><span class="line">#ç»™æ‰§è¡Œæ–‡ä»¶å¢åŠ å¯æ‰§è¡Œæƒé™</span><br><span class="line">RUN chmod a+x $AUTO_RUN_DIR/$INSTALL_DB_SQL</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>init_db.sh</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">mysql -uroot -p$MYSQL_ROOT_PASSWORD &lt;&lt; EOF</span><br><span class="line">source $WORK_PATH/$FILE_0;</span><br><span class="line">source $WORK_PATH/$FILE_1;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>init_table.sql</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CREATE DATABASE IF NOT EXISTS test;</span><br><span class="line"></span><br><span class="line">use test;</span><br><span class="line"></span><br><span class="line">CREATE TABLE IF NOT EXISTS user (</span><br><span class="line">  id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">  account VARCHAR(32) NOT NULL,</span><br><span class="line">  password VARCHAR(32) NOT NULL,</span><br><span class="line">  openId VARCHAR(100) DEFAULT NULL,</span><br><span class="line">  createdAt DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">  updatedAt DATETIME DEFAULT CURRENT_TIMESTAMP,</span><br><span class="line">  PRIMARY KEY (id)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>init_data.sql</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">INSERT INTO user (account, password) values (&#x27;admin&#x27;, &#x27;123456&#x27;);</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="ç”Ÿæˆé•œåƒ"><a href="#ç”Ÿæˆé•œåƒ" class="headerlink" title="ç”Ÿæˆé•œåƒ"></a>ç”Ÿæˆé•œåƒ</h4><p>æ–‡ä»¶ç¼–å†™å¥½äº†ï¼Œæˆ‘ä»¬å°±èƒ½åŸºäºè¯¥ <code>Dockerfile</code> æ„å»ºä¸€ä¸ªé•œåƒ</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker build -t init_mysql .</span><br></pre></td></tr></table></figure>
<p><em>note</em>:  </p>
<ol>
<li><code>-t </code>ï¼šé•œåƒåï¼Œå¯è·Ÿä¸Šç‰ˆæœ¬ï¼Œeg <code>init_mysql:0.0.1</code></li>
<li><code>.</code>ï¼š è¡¨ç¤º <code>Dockerfile</code> åœ¨å½“å‰è·¯å¾„ä¸‹</li>
<li>æ›´å¤šå‘½ä»¤å¯ä»¥ä½¿ç”¨ docker build â€“help æŸ¥çœ‹<br>è¿™æ—¶å°±èƒ½æŸ¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšç”Ÿæˆäº†é•œåƒäº†</li>
</ol>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-f90c4c21ba809398.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="é•œåƒ.png"></p>
<h4 id="è¿è¡Œå®¹å™¨-1"><a href="#è¿è¡Œå®¹å™¨-1" class="headerlink" title="è¿è¡Œå®¹å™¨"></a>è¿è¡Œå®¹å™¨</h4><p>é•œåƒç”Ÿæˆåï¼Œæˆ‘ä»¬å°±å¯ä»¥å»è¿è¡Œä¸€ä¸ªå®¹å™¨äº†</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker run -itd --name demo-mysql -p 3307:3306 -e MYSQL_ROOT_PASSWORD=root -d test_mysql</span><br></pre></td></tr></table></figure>

<p><img src="https://upload-images.jianshu.io/upload_images/9217526-4aa28b1cee38138e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å®¹å™¨.png"></p>
<p>æˆ‘ä»¬è¿›å…¥å®ä¾‹å°±å¯ä»¥çœ‹è§åˆšåˆšåˆå§‹åŒ–å¥½çš„è¡¨ä»¥åŠæ•°æ®</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-3a6753961f920077.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ•°æ®åº“.png"></p>
<p>å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯è¿æ¥ï¼ŒåŒæ ·ä¹Ÿèƒ½çœ‹è§<br><img src="https://upload-images.jianshu.io/upload_images/9217526-51b9b8e6b888ad29.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="å®¢æˆ·ç«¯.png"></p>
<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p>å¥½äº†ï¼Œæ­å–œä½ åˆ°æ­¤ï¼ŒæŠ˜è…¾åŠå¤©åï¼Œå¯ä»¥åœ¨ <code>docker</code> é‡Œé¢æ”¾è‚†çš„ä½¿ç”¨æ•°æ®åº“ã€‚äººç”Ÿä¹Ÿä¸è¿‡å¦‚æ­¤ï¼Œåœ¨äºæŠ˜è…¾ï¼Œä»¥åŠæŠ˜è…¾åçš„æˆåŠŸï¼Œå¿ƒæƒ…ä¹Ÿä¼šå¾ˆæ„‰å¿«ã€‚å°½ç®¡æ˜¯æ¬ç –ï¼Œä½†ä¹Ÿæ˜¯è‡ªå·±å®é™…åŠ¨æ‰‹æ“ä½œè¿‡ã€‚æˆ‘æ˜¯ä¸€åæ¬ç –å·¥ï¼Œä¸“æ³¨æ¬ç –ï¼Œè°¢è°¢ï¼Œé™„ä¸Š<a href="https://github.com/cc616/docker-demo/tree/master/init-db">æºç </a>å§ï¼Œå¦‚éœ€è¯·è‡ªå–ï¼ˆå°½ç®¡å®ƒå¾ˆç®€å•ï¼‰</p>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>docker</tag>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>create-react-appå…¨å®¶æ¡¶ä¹‹router+mobx+antd</title>
    <url>/2018/07/02/react-mobx/</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />

<p><code>create-react-app</code> æ˜¯ä¸€ä¸ªæ­å»º <code>react</code> é¡¹ç›®çš„è„šæ‰‹æ¶ï¼Œè¯¥è„šæ‰‹æ¶å¾ˆå¥½ç”¨ï¼Œæ–‡æ¡£åŠŸèƒ½ä¹Ÿå¾ˆå…¨ï¼Œæ˜¯ä¸Šæ‰‹  <code>react</code> é¡¹ç›®çš„ä¸äºŒé¦–é€‰ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥è®²è®² <code>reacte-react-app</code> åˆ›å»ºçš„é¡¹ç›®å¦‚ä½•é…ç½®UIç»„ä»¶ä»¥åŠæ•°æ®æµ</p>
<h3 id="ä½¿ç”¨-ceacte-react-app-åˆå§‹åŒ–é¡¹ç›®"><a href="#ä½¿ç”¨-ceacte-react-app-åˆå§‹åŒ–é¡¹ç›®" class="headerlink" title="ä½¿ç”¨ ceacte-react-app åˆå§‹åŒ–é¡¹ç›®"></a>ä½¿ç”¨ <code>ceacte-react-app</code> åˆå§‹åŒ–é¡¹ç›®</h3><h4 id="å…¨å±€å®‰è£…-create-react-app"><a href="#å…¨å±€å®‰è£…-create-react-app" class="headerlink" title="å…¨å±€å®‰è£… create-react-app"></a>å…¨å±€å®‰è£… <code>create-react-app</code></h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install -g create-react-app</span><br></pre></td></tr></table></figure>
<p><code>or</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn -g create-react-app</span><br></pre></td></tr></table></figure>

<h4 id="æ–°å»ºä¸€ä¸ªé¡¹ç›®"><a href="#æ–°å»ºä¸€ä¸ªé¡¹ç›®" class="headerlink" title="æ–°å»ºä¸€ä¸ªé¡¹ç›®"></a>æ–°å»ºä¸€ä¸ªé¡¹ç›®</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">create-react-app react-demo</span><br></pre></td></tr></table></figure>

<p>å·¥å…·ä¼šå¸®ä½ åˆå§‹åŒ–ä¸€ä¸ªç®€å•åŸºæœ¬çš„é¡¹ç›®å¹¶ä¸”ä¼šè‡ªåŠ¨å¸®ä½ å®‰è£…é¡¹ç›®æ‰€éœ€è¦çš„å„ç§ä¾èµ–ï¼Œå¦‚æœä¸­é€”å‡ºç°ç½‘ç»œé—®é¢˜å¯¼è‡´ä¾èµ–å®‰è£…ä¸ä¸Šï¼Œè¿™æ—¶ä½ å¯èƒ½éœ€è¦é…ç½®ä»£ç†æˆ–è€…è®¾ç½®å…¶ä»–çš„ <code>npm</code> æºã€‚å…³äº <code>npm</code> æºé•œåƒæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œæ¯”å¦‚æ·˜å®é•œåƒç­‰ï¼Œè¿™é‡Œä¸å¤šåšè¯´æ˜ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šã€‚</p>
<h4 id="è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨"><a href="#è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨" class="headerlink" title="è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨"></a>è¿›å…¥é¡¹ç›®å¹¶å¯åŠ¨</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd react-demo</span><br><span class="line">npm start</span><br></pre></td></tr></table></figure>
<p><code>or</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn start</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨è®¿é—® <a href="http://localhost:3000/%EF%BC%8C">http://localhost:3000/ï¼Œ</a> ä½ ä¼šçœ‹åˆ°ä¸€ä¸ª <code>react</code> çš„æ¬¢è¿ç•Œé¢ï¼Œå¦‚ä¸‹ï¼šä»£è¡¨ä½ çš„é¡¹ç›®å·²ç»æ­£å¸¸è¿è¡Œäº†</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-3c322f00a9315f0d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ¬¢è¿.png"></p>
<p><strong>ä½†æ˜¯</strong>ï¼šè¿™ä»ç„¶ä¸å¤Ÿï¼Œè¿™æ—¶ä½ ç”¨ä»£ç ç¼–è¾‘å™¨æ‰“å¼€é¡¹ç›®ä¼šå‘ç°é¡¹ç›®ç»“æ„å…¶å®æ˜¯è¿™æ ·çš„ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">react-demo/</span><br><span class="line">  README.md</span><br><span class="line">  node_modules/</span><br><span class="line">  package.json</span><br><span class="line">  public/</span><br><span class="line">    index.html</span><br><span class="line">    favicon.ico</span><br><span class="line">  src/</span><br><span class="line">    App.css</span><br><span class="line">    App.js</span><br><span class="line">    App.test.js</span><br><span class="line">    index.css</span><br><span class="line">    index.js</span><br><span class="line">    logo.svg</span><br></pre></td></tr></table></figure>

<p>æ‰¾ä¸åˆ° <code>webpack</code> çš„é…ç½®é¡¹ï¼Œæ­¤æ—¶ä½ éœ€è¦å±•å¼€ (<code>eject</code>) é¡¹ç›®ï¼Œè¿™ä¸ªä¸€ä¸ªä¸å¯é€†è¿‡ç¨‹ï¼Œä¸€æ—¦ä½ æ‰§è¡Œäº†ï¼Œå°±ä¸èƒ½å›åˆ°åˆå§‹åŒ–</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run eject</span><br></pre></td></tr></table></figure>

<p>å†çœ‹é¡¹ç›®ç»“æ„ï¼Œå°±ä¼šå¤šäº†ä¸€äº›å…¶ä»–ç›®å½•ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">react-demo/</span><br><span class="line">  README.md</span><br><span class="line">  config/</span><br><span class="line">    jest/</span><br><span class="line">    env.js</span><br><span class="line">    paths.js</span><br><span class="line">    polyfills.js</span><br><span class="line">    webpack.config.dev.js</span><br><span class="line">    webpack.config.prod.js</span><br><span class="line">    webpackDevServer.config.js</span><br><span class="line">  node_modules/</span><br><span class="line">  package.json</span><br><span class="line">  public/</span><br><span class="line">    index.html</span><br><span class="line">    favicon.ico</span><br><span class="line">  scripts/</span><br><span class="line">    build.js</span><br><span class="line">    start.js</span><br><span class="line">    test.js</span><br><span class="line">  src/</span><br><span class="line">    App.css</span><br><span class="line">    App.js</span><br><span class="line">    App.test.js</span><br><span class="line">    index.css</span><br><span class="line">    index.js</span><br><span class="line">    logo.svg</span><br><span class="line">    registerServiceWorker.js</span><br></pre></td></tr></table></figure>

<p>å±•å¼€ <code>config</code> ç›®å½•ï¼Œé‡Œé¢å°±æœ‰ <code>webpack</code> é…ç½®æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€äº›ç¯å¢ƒã€å…¼å®¹ã€æµ‹è¯•ç­‰çš„é…ç½®ã€‚è€Œ <code>scripts</code> ç›®å½•é‡Œä¸»è¦å°±æ˜¯æµ‹è¯•ã€å¯åŠ¨ã€æ‰“åŒ…çš„è„šæœ¬ï¼Œè¿™é‡Œä¸åšè¿‡å¤šæè¿°ï¼Œ(å…¶å®ç¬”è€…ä¹Ÿæ²¡è®¤çœŸçœ‹è¿‡é‡Œé¢çš„ä»£ç )ï¼Œå¦‚æœè¦è¯¦ç»†ç ”ç©¶ï¼Œ<code>create-react-app</code> çš„<a href="https://github.com/facebook/create-react-app/blob/master/packages/react-scripts/template/README.md">å®˜æ–¹æ–‡æ¡£</a>æœ‰è¯¦ç»†çš„è®²è§£ã€‚</p>
<p>å¥½äº†ï¼Œç°åœ¨ <code>react</code> é¡¹ç›®å·²ç»è·‘èµ·æ¥äº†ï¼Œä¹Ÿæ‰¾åˆ° <code>webpack</code> é…ç½®ï¼Œå¯ä»¥åšä¸€äº›è‡ªå®šä¹‰çš„é…ç½®ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±è®²ä¸€å°†ï¼Œå¦‚ä½•é…ç½®æ•°æ®æµä»¥åŠUIåº“ã€‚</p>
<h3 id="sass-çš„é…ç½®"><a href="#sass-çš„é…ç½®" class="headerlink" title="sass çš„é…ç½®"></a><code>sass</code> çš„é…ç½®</h3><h4 id="å®‰è£…-loader-ä¾èµ–"><a href="#å®‰è£…-loader-ä¾èµ–" class="headerlink" title="å®‰è£… loader ä¾èµ–"></a>å®‰è£… <code>loader</code> ä¾èµ–</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install resolve-url-loader sass-loader node-sass --save</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹-webpacké…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹-webpacké…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ webpacké…ç½®æ–‡ä»¶"></a>ä¿®æ”¹ <code>webpack</code>é…ç½®æ–‡ä»¶</h4><p>  æ‰¾åˆ° <code>webpack.config.dev.js</code> ä¸ <code>webpack.config.prod.js</code> æ–‡ä»¶ï¼Œåç¼€ <code>dev</code> è¡¨ç¤ºå¼€å‘çš„é…ç½®ï¼Œ<code>prod</code> è¡¨ç¤ºæ˜¯ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œå› æ­¤ä¸¤ä¸ªé…ç½®æ–‡ä»¶éƒ½éœ€è¦ä¿®æ”¹ã€‚</p>
<ul>
<li>ä¿®æ”¹<code>webpack.config.dev.js</code></li>
</ul>
<p>åœ¨ <code>module</code> çš„ <code>rules</code> å­—æ®µä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.scss$/,</span><br><span class="line">  use: [</span><br><span class="line">    require.resolve(&#x27;style-loader&#x27;),</span><br><span class="line">    &#123;</span><br><span class="line">      loader: require.resolve(&#x27;css-loader&#x27;), // translates CSS into CommonJS</span><br><span class="line">      options: &#123;</span><br><span class="line">        sourceMap: true,</span><br><span class="line">        importLoaders: 3,</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   require.resolve(&#x27;resolve-url-loader&#x27;), // resolves relative paths in url() statements based on the original source file</span><br><span class="line">   &#123;</span><br><span class="line">      loader: require.resolve(&#x27;postcss-loader&#x27;),</span><br><span class="line">      options: &#123;</span><br><span class="line">        ident: &#x27;postcss&#x27;, // https://webpack.js.org/guides/migrating/#complex-options</span><br><span class="line">        plugins: () =&gt; [</span><br><span class="line">          require(&#x27;postcss-flexbugs-fixes&#x27;),</span><br><span class="line">          autoprefixer(&#123;</span><br><span class="line">            flexbox: &#x27;no-2009&#x27;,</span><br><span class="line">          &#125;),</span><br><span class="line">        ],</span><br><span class="line">     &#125;,</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      loader: require.resolve(&#x27;sass-loader&#x27;),  // compiles Sass to CSS,</span><br><span class="line">      options: &#123;</span><br><span class="line">        includePaths: [`$&#123;paths.appNodeModules&#125;/normalize-scss/sass`],</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶ä¿®æ”¹ <code>.css</code> æ ·å¼æ–‡ä»¶ä¸º <code>.scss</code> å¹¶ç”¨ <code>sass</code> è¯­æ³•ä¿®æ”¹æ ·å¼ï¼Œä¼šå‘ç°é¡µé¢ç”Ÿæ•ˆäº†ï¼Œåˆ«å¿˜äº†ä¿®æ”¹åœ¨ç»„ä»¶ä¸­å¼•ç”¨æ ·å¼çš„åç¼€ã€‚</p>
<p>å½“ç„¶ï¼Œè¿™åªæ˜¯ä¿®æ”¹äº†å¼€å‘ç¯å¢ƒçš„é…ç½®ï¼Œè¿˜éœ€è¦ä¿®æ”¹ç”Ÿäº§ç¯å¢ƒ</p>
<ul>
<li><p>ä¿®æ”¹<code>webpack.config.prod.js</code></p>
<p>åŒæ ·åœ¨ <code>rules</code> å­—æ®µä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test : /\.scss$/,</span><br><span class="line">  use  : ExtractTextPlugin.extract(</span><br><span class="line">    Object.assign(</span><br><span class="line">      &#123;</span><br><span class="line">        fallback: require.resolve(&#x27;style-loader&#x27;),</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: require.resolve(&#x27;css-loader&#x27;), // translates CSS into CommonJS</span><br><span class="line">            options: &#123;</span><br><span class="line">              sourceMap     : true,</span><br><span class="line">              minimize      : true,</span><br><span class="line">              importLoaders : 3,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          require.resolve(&#x27;resolve-url-loader&#x27;), // resolves relative paths in url() statements based on the original source file</span><br><span class="line">          &#123;</span><br><span class="line">            loader: require.resolve(&#x27;postcss-loader&#x27;),</span><br><span class="line">            options: &#123;</span><br><span class="line">              ident: &#x27;postcss&#x27;, // https://webpack.js.org/guides/migrating/#complex-options</span><br><span class="line">              plugins: () =&gt; [</span><br><span class="line">                require(&#x27;postcss-flexbugs-fixes&#x27;),</span><br><span class="line">                autoprefixer(&#123;</span><br><span class="line">                  flexbox: &#x27;no-2009&#x27;,</span><br><span class="line">                &#125;),</span><br><span class="line">              ],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line"></span><br><span class="line">          &#123;</span><br><span class="line">            loader: require.resolve(&#x27;sass-loader&#x27;),  // compiles Sass to CSS,</span><br><span class="line">            options: &#123;</span><br><span class="line">              includePaths: [`$&#123;paths.appNodeModules&#125;/normalize-scss/sass`],</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ]</span><br><span class="line">      &#125;,</span><br><span class="line">      extractTextPluginOptions</span><br><span class="line">    )</span><br><span class="line">  ),</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="å¼•å…¥UIåº“"><a href="#å¼•å…¥UIåº“" class="headerlink" title="å¼•å…¥UIåº“"></a>å¼•å…¥UIåº“</h3><p>ç¬”è€…ä½¿ç”¨çš„æ˜¯èš‚èšé‡‘æœçš„ <code>antd</code> UIç»„ä»¶åº“ï¼Œæ–‡æ¡£å…¨ï¼Œä½¿ç”¨ç®€å•ï¼Œç»„ä»¶ä¹Ÿèƒ½æ»¡è¶³åŸºæœ¬çš„éœ€æ±‚ã€‚<a href="https://ant.design/docs/react/introduce-cn">å®˜æ–¹æ–‡æ¡£</a>ä¹Ÿæœ‰å…·ä½“çš„ç›¸å…³é…ç½®è¯´æ˜ã€‚</p>
<h4 id="å®‰è£…ç»„ä»¶"><a href="#å®‰è£…ç»„ä»¶" class="headerlink" title="å®‰è£…ç»„ä»¶"></a>å®‰è£…ç»„ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install antd --save</span><br></pre></td></tr></table></figure>
<p><code>or</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add antd</span><br></pre></td></tr></table></figure>
<h4 id="æŒ‰éœ€åŠ è½½"><a href="#æŒ‰éœ€åŠ è½½" class="headerlink" title="æŒ‰éœ€åŠ è½½"></a>æŒ‰éœ€åŠ è½½</h4><p>ä½¿ç”¨ <code>babel-plugin-import</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-import --save</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹-webpack-æ–‡ä»¶"><a href="#ä¿®æ”¹-webpack-æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹ webpack æ–‡ä»¶"></a>ä¿®æ”¹ <code>webpack</code> æ–‡ä»¶</h4><p>åœ¨ <code>rules</code> ä¸­çš„ <code>babel</code> è§„åˆ™ä¸­çš„ <code>options</code> ä¸­æ·»åŠ ä»¥ä¸‹ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">   [&#x27;import&#x27;, &#123; libraryName: &#x27;antd&#x27;, style: true &#125;],</span><br><span class="line">],</span><br></pre></td></tr></table></figure>

<h4 id="å¼•å…¥æ ·å¼"><a href="#å¼•å…¥æ ·å¼" class="headerlink" title="å¼•å…¥æ ·å¼"></a>å¼•å…¥æ ·å¼</h4><p>ä½¿ç”¨ <code>less</code> åŠ è½½</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install less@2.7.2 less-loader --save</span><br></pre></td></tr></table></figure>

<p><em>æ³¨æ„ï¼š</em> <code>less</code> ç‰ˆæœ¬ä¸èƒ½é«˜äº <code>3.0.0</code> è‡³äºä¸ºä»€ä¹ˆï¼Œè¯·åŸè°…ç¬”è€…ä¹Ÿä¸çŸ¥é“ï¼Œ<a href="https://github.com/ant-design/ant-design/issues/7927#issuecomment-372513256">å®˜æ–¹issue</a> </p>
<p>ä¿®æ”¹ <code>webpack</code> æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.less$/,</span><br><span class="line">  use: [</span><br><span class="line">    require.resolve(&#x27;style-loader&#x27;),</span><br><span class="line">    require.resolve(&#x27;css-loader&#x27;),</span><br><span class="line">    &#123;</span><br><span class="line">      loader: require.resolve(&#x27;less-loader&#x27;),</span><br><span class="line">      options: &#123;</span><br><span class="line">        modifyVars: &#123; &#x27;@primary-color&#x27;: &#x27;#1890ff&#x27; &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>@primary-color</code> è¡¨ç¤ºä¸»é¢˜è‰²ï¼Œ<a href="https://ant.design/docs/react/customize-theme-cn">å®˜æ–¹</a>ä¹Ÿæœ‰æ¨èé…ç½®ä¸»é¢˜è‰²çš„è¯´æ˜ã€‚</p>
<h4 id="åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶"><a href="#åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶" class="headerlink" title="åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶"></a>åœ¨é¡µé¢ä¸­ä½¿ç”¨ç»„ä»¶</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; Button &#125; from &#x27;antd&#x27;;</span><br><span class="line">...</span><br><span class="line">&lt;div&gt;</span><br><span class="line">  &lt;Button type=&quot;primary&quot;&gt;button&lt;/Button&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶é¡µé¢ä¸Šå°±ä¼šæ˜¾ç¤º <code>Button</code> ç»„ä»¶</p>
<h3 id="é…ç½®-eslint"><a href="#é…ç½®-eslint" class="headerlink" title="é…ç½® eslint"></a>é…ç½® <code>eslint</code></h3><p>ä¸ºäº†æ˜¯ä»£ç ä¿æŒç»Ÿä¸€é£æ ¼ï¼Œå¯ä»¥ä½¿ç”¨å·¥å…· <code>eslit</code> æ¥æ£€æŸ¥ä»£ç çš„è§„èŒƒæ€§ã€‚ç¬”è€…æ˜¯ä½¿ç”¨ <code>airbnb</code> çš„ä»£ç é£æ ¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰å±äºè‡ªå·±çš„code-styleã€‚</p>
<h4 id="å®‰è£…éœ€è¦çš„åŒ…"><a href="#å®‰è£…éœ€è¦çš„åŒ…" class="headerlink" title="å®‰è£…éœ€è¦çš„åŒ…"></a>å®‰è£…éœ€è¦çš„åŒ…</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install eslint-config-airbnb --save</span><br></pre></td></tr></table></figure>

<p><em>æ³¨æ„</em>ï¼š<br>ä¹Ÿè®¸ä½¿ç”¨ <code>create-react-app</code> åˆå§‹åŒ–å‡ºæ¥çš„é¡¹ç›®ï¼Œé…ç½® <code>eslint</code> ä»¥åŠå®‰è£…äº†å„ç§ <code>eslint</code> ä¾èµ–ï¼Œè¿™æ—¶å¯åŠ¨é¡¹ç›®å‘ç°æŠ¥ä»¥ä¸‹é”™è¯¯ï¼Œé‚£ä¹ˆä½ å¯èƒ½éœ€è¦æ›´æ”¹åŒ…çš„ç‰ˆæœ¬ï¼Œç¬”è€…ä¹Ÿæ˜¯å°è¯•äº†å¤šæ¬¡æ‰æˆåŠŸçš„ã€‚</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-58ef3bbca688ac90.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="eslint.png"></p>
<h4 id="å¼•å…¥é…ç½®"><a href="#å¼•å…¥é…ç½®" class="headerlink" title="å¼•å…¥é…ç½®"></a>å¼•å…¥é…ç½®</h4><p>åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.eslintrc</code> æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;env&quot;: &#123;</span><br><span class="line">    &quot;browser&quot;: true,</span><br><span class="line">    &quot;jest&quot;: true,</span><br><span class="line">    &quot;es6&quot;: true,</span><br><span class="line">    &quot;node&quot;: true</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;parser&quot;: &quot;babel-eslint&quot;,</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;react&quot;,</span><br><span class="line">    &quot;import&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;extends&quot;: &quot;airbnb&quot;,</span><br><span class="line">  &quot;rules&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>rules</code> å¯ä»¥è¦†ç›– <code>airbnb</code> çš„è§„åˆ™ï¼Œå…³äºå¦‚ä½•ç¼–å†™ <code>eslint</code> è§„åˆ™å¯ä»¥æŸ¥è¯¢ <a href="https://eslint.org/"><code>eslint</code> å®˜æ–¹æ–‡æ¡£</a></p>
<p>ä¹Ÿå¯ä»¥åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º <code>.eslintignore</code> æ¥å¯¹æŸäº›æ–‡ä»¶ä¸åš <code>eslint</code> æ ¡éªŒ</p>
<h4 id="commit-ä»£ç æ—¶ä½¿ç”¨-eslint-æ£€æŸ¥"><a href="#commit-ä»£ç æ—¶ä½¿ç”¨-eslint-æ£€æŸ¥" class="headerlink" title="commit ä»£ç æ—¶ä½¿ç”¨ eslint æ£€æŸ¥"></a><code>commit</code> ä»£ç æ—¶ä½¿ç”¨ <code>eslint</code> æ£€æŸ¥</h4><p>å®‰è£…ä¾èµ–</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install lint-staged husky --save</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>package.json</code> æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;precommit&quot;: &quot;lint-staged&quot;,</span><br><span class="line">  &quot;start&quot;: &quot;react-scripts start&quot;,</span><br><span class="line">  &quot;build&quot;: &quot;react-scripts build&quot;,</span><br><span class="line">...</span><br><span class="line">&quot;lint-staged&quot;: &#123;</span><br><span class="line">  &quot;src/**/*.&#123;js,jsx&#125;&quot;: [</span><br><span class="line">    &quot;eslint --fix&quot;,</span><br><span class="line">    &quot;git add&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="å¼•å…¥è·¯ç”±ç³»ç»Ÿ"><a href="#å¼•å…¥è·¯ç”±ç³»ç»Ÿ" class="headerlink" title="å¼•å…¥è·¯ç”±ç³»ç»Ÿ"></a>å¼•å…¥è·¯ç”±ç³»ç»Ÿ</h3><h4 id="è®¾ç½®æ–‡ä»¶åˆ«å"><a href="#è®¾ç½®æ–‡ä»¶åˆ«å" class="headerlink" title="è®¾ç½®æ–‡ä»¶åˆ«å"></a>è®¾ç½®æ–‡ä»¶åˆ«å</h4><p>ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ”¹ <code>src</code> ç›®å½•çš„æ–‡ä»¶ç»“æ„ï¼Œä»¥ä¾¿äºæ›´ç¬¦åˆå®é™…é¡¹ç›®åœºæ™¯ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ <code>components</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾ç»„ä»¶ï¼Œ<code>routes</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾é¡µé¢ï¼Œ<code>styles</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾æ ·å¼ï¼Œ<code>utils</code> æ–‡ä»¶å¤¹æ¥å­˜æ”¾å·¥å…·ç±»å‡½æ•°ç­‰ã€‚</p>
<p>æ—¢ç„¶æœ‰äº†æ–‡ä»¶å¤¹æ¥åŒºåˆ†ä¸åŒçš„åŠŸèƒ½ï¼Œä¸ºäº†æ–¹ä¾¿æ–‡ä»¶çš„ç›¸äº’ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ <code>webpack</code> æ¥è®¾ç½®åˆ«åã€‚</p>
<ul>
<li>ä¿®æ”¹ <code>config</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>paths</code> æ–‡ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  appSrc: resolveApp(&#x27;src&#x27;),</span><br><span class="line">  appStyles: resolveApp(&#x27;src/styles&#x27;),</span><br><span class="line">  appRoutes: resolveApp(&#x27;src/routes&#x27;),</span><br><span class="line">  appComponents: resolveApp(&#x27;src/components&#x27;),</span><br><span class="line">  appUtils: resolveApp(&#x27;src/utils&#x27;),</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ <code>webpack</code> é…ç½®é¡¹ <code>alias</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">  styles: paths.appStyles,</span><br><span class="line">  routes: paths.appRoutes,</span><br><span class="line">  components: paths.appComponents,</span><br><span class="line">  utils: paths.appUtils,</span><br><span class="line">  ...</span><br></pre></td></tr></table></figure>

<h4 id="å®‰è£…è·¯ç”±ç»„ä»¶-react-router"><a href="#å®‰è£…è·¯ç”±ç»„ä»¶-react-router" class="headerlink" title="å®‰è£…è·¯ç”±ç»„ä»¶ react-router"></a>å®‰è£…è·¯ç”±ç»„ä»¶ <code>react-router</code></h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install react-router react-router-dom --save</span><br></pre></td></tr></table></figure>

<ul>
<li>åœ¨ <code>routes</code> æ–‡ä»¶å¤¹ä¸­æ–°å»º <code>index.jsx</code> é¡µé¢ï¼Œä»¥åŠæ–°å»ºä¸¤ä¸ªé¡µé¢ç»„ä»¶åˆ†åˆ«æ˜¯ <code>home.jsx</code> å’Œ <code>about.jsx</code></li>
</ul>
<p><code>index.jsx</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; Route, Redirect &#125; from &#x27;react-router&#x27;</span><br><span class="line">import &#123; HashRouter, Switch &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">import Home from &#x27;routes/home&#x27;</span><br><span class="line">import About from &#x27;routes/about&#x27;</span><br><span class="line"></span><br><span class="line">const Routes = () =&gt; (</span><br><span class="line">  &lt;HashRouter&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;Route exact path=&quot;/&quot; render=&#123;() =&gt; &lt;Redirect to=&quot;/home&quot; /&gt;&#125; /&gt;</span><br><span class="line">      &lt;Switch&gt;</span><br><span class="line">        &lt;Route path=&quot;/home&quot; component=&#123;Home&#125; /&gt;</span><br><span class="line">        &lt;Route path=&quot;/about&quot; component=&#123;About&#125; /&gt;</span><br><span class="line">      &lt;/Switch&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/HashRouter&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Routes /&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">export default App</span><br></pre></td></tr></table></figure>

<p><code>about.jsx</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; Link &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">const About = () =&gt; (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;this is about page&lt;/p&gt;</span><br><span class="line">    &lt;Link to=&quot;/home&quot;&gt;goto Home&lt;/Link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">export default About</span><br></pre></td></tr></table></figure>

<p><code>home.jsx</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123; Link &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">const Home = () =&gt; (</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;p&gt;this is home page&lt;/p&gt;</span><br><span class="line">    &lt;Link to=&quot;/about&quot;&gt;goto About&lt;/Link&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">export default Home</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ <code>src</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>index</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import ReactDOM from &#x27;react-dom&#x27;</span><br><span class="line">import App from &#x27;routes/index&#x27;</span><br><span class="line">import registerServiceWorker from &#x27;./registerServiceWorker&#x27;</span><br><span class="line"></span><br><span class="line">ReactDOM.render(&lt;App /&gt;, document.getElementById(&#x27;root&#x27;))</span><br></pre></td></tr></table></figure>

<h3 id="æ·»åŠ æ•°æ®çŠ¶æ€ç®¡ç†"><a href="#æ·»åŠ æ•°æ®çŠ¶æ€ç®¡ç†" class="headerlink" title="æ·»åŠ æ•°æ®çŠ¶æ€ç®¡ç†"></a>æ·»åŠ æ•°æ®çŠ¶æ€ç®¡ç†</h3><p><code>react</code> æœ¬èº«å°±æœ‰è‡ªå·±çš„çŠ¶æ€ç®¡ç† <code>state</code>ï¼Œä½†éšç€é¡¹ç›®çš„å¤æ‚æ€§é¡µé¢çš„å¢å¤šå…¶ç»´æŠ¤æ€§ä¸æ˜¯é‚£ä¹ˆå‹å¥½ï¼Œäºæ˜¯å‡ºç°äº†é’ˆå¯¹ <code>react</code> çš„æ•°æ®çŠ¶æ€ç®¡ç†ï¼Œå¦‚ <code>flux</code>ã€<code>redux</code>ã€<code>mobx</code> ç­‰ç­‰ã€‚ä¸‹é¢æˆ‘ä»¬å°±è®²è§£é¡¹ç›®å¦‚ä½•é…ç½® <code>mobx</code>ã€‚</p>
<h4 id="å®‰è£…ä¾èµ–"><a href="#å®‰è£…ä¾èµ–" class="headerlink" title="å®‰è£…ä¾èµ–"></a>å®‰è£…ä¾èµ–</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install mobx mobx-react --save</span><br></pre></td></tr></table></figure>

<h4 id="ä¿®æ”¹æ–‡ä»¶"><a href="#ä¿®æ”¹æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹æ–‡ä»¶"></a>ä¿®æ”¹æ–‡ä»¶</h4><ul>
<li><p>æ–°å»ºæ–‡ä»¶å¤¹ <code>stores</code></p>
<p>åœ¨ <code>src</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ <code>stores</code>ï¼Œåˆ›å»º <code>index.js</code> æ–‡ä»¶</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const store = &#123;&#125;</span><br><span class="line"></span><br><span class="line">export default store</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¿®æ”¹ <code>webpack</code> æ–‡ä»¶</p>
<p>åœ¨ <code>webpack</code> æ–‡ä»¶ä¸­è®¾ç½®åˆ«åï¼Œæ–¹é¢å¼•ç”¨ï¼Œå½“ç„¶åˆ«å¿˜äº†ä¿®æ”¹ <code>paths</code> æ–‡ä»¶æ¥è®¾ç½®è·¯å¾„</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">  styles: paths.appStyles,</span><br><span class="line">  routes: paths.appRoutes,</span><br><span class="line">  components: paths.appComponents,</span><br><span class="line">  stores: appStores,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li><p>ä¿®æ”¹å…¥å£æ–‡ä»¶</p>
<p>ä¿®æ”¹ <code>routes</code> ä¸‹çš„ <code>index.js</code></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123; Provider &#125; from &#x27;mobx-react&#x27;</span><br><span class="line">import stores from &#x27;stores&#x27;</span><br><span class="line">...</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Provider &#123;...stores&#125;&gt;</span><br><span class="line">    &lt;Routes /&gt;</span><br><span class="line">  &lt;/Provider&gt;</span><br><span class="line">)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<h4 id="å¼€å§‹ä½¿ç”¨"><a href="#å¼€å§‹ä½¿ç”¨" class="headerlink" title="å¼€å§‹ä½¿ç”¨"></a>å¼€å§‹ä½¿ç”¨</h4><ul>
<li>ä½¿ç”¨ <code>mobx</code> ä½ è¿˜éœ€è¦å®‰è£… <code>babel</code> çš„è£…é¥°å™¨æ’ä»¶ï¼Œä»¥åŠä¿®æ”¹ <code>babel</code> çš„é…ç½®</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install babel-plugin-transform-decorators-legacy --save</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>package.json</code> æ–‡ä»¶ä¸­çš„ <code>babel</code> å‚æ•°ï¼Œæˆ–è€…åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ª <code>.babelrc</code> æ–‡ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;babel&quot;: &#123;</span><br><span class="line">  &quot;presets&quot;: [</span><br><span class="line">    &quot;react-app&quot;</span><br><span class="line">  ],</span><br><span class="line">  &quot;plugins&quot;: [</span><br><span class="line">    &quot;babel-plugin-transform-decorators-legacy&quot;</span><br><span class="line">  ]</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ï¼Œä½ å¯ä»¥åœ¨ä½ çš„ç»„ä»¶ä¸­ä½¿ç”¨ <code>mobx</code> æ¥ç®¡ç†ä½ çš„çŠ¶æ€äº†ã€‚å…³äº <code>mobx</code> çš„ä½¿ç”¨ï¼Œä½ å¯ä»¥è®¿é—®<a href="https://github.com/mobxjs/mobx">å®˜æ–¹æ–‡æ¡£</a></p>
<h4 id="æ·»åŠ -mobx-å¼€å‘å·¥å…·"><a href="#æ·»åŠ -mobx-å¼€å‘å·¥å…·" class="headerlink" title="æ·»åŠ  mobx å¼€å‘å·¥å…·"></a>æ·»åŠ  <code>mobx</code> å¼€å‘å·¥å…·</h4><ul>
<li>å®‰è£…ä¾èµ–</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install mobx-react-devtools</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹å…¥å£æ–‡ä»¶ <code>routes</code> ä¸‹çš„ <code>index.js</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">import DevTools from &#x27;mobx-react-devtools&#x27;</span><br><span class="line">....</span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Fragment&gt;</span><br><span class="line">    &lt;Provider &#123;...stores&#125;&gt;</span><br><span class="line">      &lt;Routes /&gt;</span><br><span class="line">    &lt;/Provider&gt;</span><br><span class="line">    &lt;DevTools /&gt;</span><br><span class="line">  &lt;/Fragment&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œåªåœ¨å¼€å‘ä¸­æ‰“å¼€è¯¥å·¥å…·</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  process.env.NODE_ENV === &#x27;development&#x27; ? (</span><br><span class="line">    &lt;DevTools /&gt;</span><br><span class="line">  ) : null</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h3><p><code>create-react-app</code> è„šæ‰‹æ¶å…¶å®å·²ç»å¾ˆå®Œç¾äº†ï¼Œä¸€äº›åˆ—çš„æ‰“åŒ…ç¼–è¯‘ä¼˜åŒ–ä¹Ÿåšäº†ï¼Œä½¿ç”¨ <code>create-react-app</code> åˆå§‹åŒ–çš„é¡¹ç›®ï¼Œåªéœ€è¦æ ¹æ®ä¸šåŠ¡å®šåˆ¶åŒ–çš„é…ç½®ä¸€äº›ä¸œè¥¿ï¼Œè¿™äº›éƒ½ä¸éš¾ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šç±»ä¼¼çš„æ¡ˆä¾‹ï¼Œä¸»è¦è¿˜æ˜¯å¿ƒç»†ï¼Œå¤šå»ä¸“ç ”ã€‚<br>æœ€åï¼Œé™„ä¸Šæœ¬æ¬¡é¡¹ç›®çš„å®Œæ•´<a href="https://github.com/cc616/cra-demo">ä»£ç </a><br>æ¬¢è¿æŒ‡å‡ºä¸è¶³ä¹‹å¤„ï¼Œå¦‚æœæ‚¨è§‰å¾—ä¸é”™ï¼Œä¸è¦å¿˜è®°<strong>star</strong>å“Ÿ</p>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>mobx</tag>
        <tag>router</tag>
        <tag>antd</tag>
      </tags>
  </entry>
  <entry>
    <title>reactå…¨å®¶æ¡¶ä¹‹redux</title>
    <url>/2018/07/07/react-redux/</url>
    <content><![CDATA[<meta name="referrer" content="no-referrer" />

<p><em>å‰è¨€</em>ï¼šè¯¥æ–‡ç« ä¸»è¦è®²è§£å¦‚ä½•åœ¨ <code>react</code> é¡¹ç›®ä¸­æ¥å…¥ <code>redux</code> æ•°æ®çŠ¶æ€ç®¡ç†ï¼Œå‡è®¾ä½ å·²ç»é˜…è¯»è¿‡è¿™ç¯‡æ–‡ç« <a href="http://licuicui.top/2018/07/02/react-mobx">create-react-appå…¨å®¶æ¡¶ä¹‹router+mobx+antd</a>ä¸­çš„å‰åŠç¯‡ï¼ˆé™¤å»<strong>æ·»åŠ æ•°æ®ç®¡ç†</strong>è¿™ä¸€æ®µï¼‰ã€‚</p>
<ul>
<li>å®‰è£…éœ€è¦çš„ä¾èµ–åŒ…</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install redux react-redux --save</span><br></pre></td></tr></table></figure>

<ul>
<li>æ–°å»ºéœ€è¦çš„æ–‡ä»¶å¤¹</li>
</ul>
<p>åœ¨ <code>src</code> ç›®å½•ä¸‹æ–°å»º <code>actions</code>ã€<code>reducers</code>ã€<code>constants</code> æ–‡ä»¶å¤¹ï¼Œ<code>actions</code> å­˜æ”¾åˆ†å‘çš„ <code>action</code>å‡½æ•°ï¼›<code>reducers</code> å­˜æ”¾å•ä¸ªçš„ <code>reducer</code>ï¼›<code>constants</code> å­˜æ”¾åˆ†å‘ <code>action</code> çš„ <code>type</code> å¸¸é‡ã€‚</p>
<p>  åœ¨ <code>reducers</code> ä¸­åˆ›å»º <code>index.js</code>ï¼Œç”¨æ¥ç»„åˆå•ä¸ªçš„ <code>reducer</code>ï¼Œè¾“å‡ºæ ¹ <code>state</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import &#123; combineReducers &#125; from &#x27;redux&#x27;</span><br><span class="line"></span><br><span class="line">export default combineReducers(&#123;&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ <code>webpack</code> æ–‡ä»¶æ¥è®¾ç½®åˆ«å</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">  styles: paths.appStyles,</span><br><span class="line">  routes: paths.appRoutes,</span><br><span class="line">  components: paths.appComponents,</span><br><span class="line">  actions: paths.appActions,</span><br><span class="line">  constants: paths.appConstants,</span><br><span class="line">  reducers: paths.appReducers,</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li>æ·»åŠ  <code>redux-thunk</code> å¼‚æ­¥ä¸­é—´ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install redux-thunk --save</span><br></pre></td></tr></table></figure>

<ul>
<li>ä¿®æ”¹ <code>routes</code> æ–‡ä»¶å¤¹ä¸‹çš„ <code>index.js</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">...</span><br><span class="line">import &#123; Provider &#125; from &#x27;react-redux&#x27;</span><br><span class="line">import &#123; createStore, applyMiddleware, compose &#125; from &#x27;redux&#x27;</span><br><span class="line">import thunkMiddleware from &#x27;redux-thunk&#x27;</span><br><span class="line">import rootReducer from &#x27;reducers&#x27;</span><br><span class="line">...</span><br><span class="line">const store = createStore(</span><br><span class="line">  rootReducer,</span><br><span class="line">  compose(applyMiddleware(thunkMiddleware)),</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">const App = () =&gt; (</span><br><span class="line">  &lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">    &lt;Routes /&gt;</span><br><span class="line">  &lt;/Provider&gt;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨ä½ å¯ä»¥ç¼–å†™ä½ è‡ªå·±çš„ <code>action</code>ï¼Œ<code>reducer</code> äº†ã€‚</p>
<ul>
<li>é…åˆæµè§ˆå™¨å®‰è£…è¾…åŠ©å·¥å…· <code>Redux DevTools</code></li>
</ul>
<p>Chromeæµè§ˆå™¨å®‰è£… <code>Redux DevTools</code> æ‰©å±•ç¨‹åºï¼Œä¿®æ”¹ <code>routes</code> ä¸­çš„ <code>index.js</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">let composeEnhancers = compose</span><br><span class="line">if (process.env.NODE_ENV === &#x27;development&#x27;) &#123;</span><br><span class="line">  composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;  // eslint-disable-line</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const store = createStore(</span><br><span class="line">  rootReducer,</span><br><span class="line">  composeEnhancers(applyMiddleware(thunkMiddleware)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>åœ¨æµè§ˆå™¨ç•Œé¢æ‰“å¼€ <code>Redux DevTools</code> å°±èƒ½çœ‹è§ä»¥ä¸‹æ•ˆæœ</p>
<p><img src="https://upload-images.jianshu.io/upload_images/9217526-038be380f9115290.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="DevTools.png"></p>
<h3 id="ç¼–å†™middleware"><a href="#ç¼–å†™middleware" class="headerlink" title="ç¼–å†™middleware"></a>ç¼–å†™middleware</h3><p>å¦‚æœéœ€è¦è‡ªå®šä¹‰çš„ <code>middleware</code>ï¼Œå¾ˆç®€å•ï¼Œè¿™ä¸ª <code>middleware</code> åªæ¥æ”¶ä¸€ä¸ª <code>action</code>ï¼Œæ‰§è¡Œåä¹Ÿéœ€è¦è¿”å›ä¸€ä¸ª <code>action</code>ï¼›å¦‚æœéœ€è¦æ‰§è¡Œä¸‹ä¸€æ­¥ï¼Œè°ƒç”¨ <code>next(action)</code> å³å¯ã€‚</p>
<ul>
<li>æ—¥å¿—çš„ä¸­é—´ä»¶</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const logger = store =&gt; next =&gt; (action) =&gt; &#123;</span><br><span class="line">  console.log(&#x27;dispatching&#x27;, action);</span><br><span class="line">  const result = next(action);</span><br><span class="line">  console.log(&#x27;next state&#x27;, store.getState());</span><br><span class="line">  return result;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>ä¿®æ”¹ <code>routes</code>æ–‡ä»¶å¤¹ä¸‹çš„ <code>index.js</code>ï¼Œå°†è¯¥æ—¥å¿—ä¸­é—´ä»¶åŠ ä¸Š</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const store = createStore(</span><br><span class="line">  rootReducer,</span><br><span class="line">  composeEnhancers(applyMiddleware(thunkMiddleware, logger)),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶è¿˜æ˜¯é™„ä¸Š<a href="https://github.com/cc616/cra-demo/tree/redux-demo/src">é¡¹ç›®åœ°å€</a><br>æ¬¢è¿æŒ‡æ­£ã€<strong>star</strong></p>
<h3 id="ä¸­é€”é‡åˆ°çš„é—®é¢˜"><a href="#ä¸­é€”é‡åˆ°çš„é—®é¢˜" class="headerlink" title="ä¸­é€”é‡åˆ°çš„é—®é¢˜"></a>ä¸­é€”é‡åˆ°çš„é—®é¢˜</h3><h4 id="å…³äºreducer"><a href="#å…³äºreducer" class="headerlink" title="å…³äºreducer"></a>å…³äºreducer</h4><ul>
<li>æ§åˆ¶å°æç¤º<code>No reducer provided for key &#39;xxxReducer&#39;</code><br>å‡ºç°æƒ…å†µ: ä¸¤ä¸ªreduceræ–‡ä»¶å¦‚ä¸‹å†™</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const reducer = () =&gt; &#123;&#125;;</span><br><span class="line">export default reducer;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨reduceræ±‡æ€»æ–‡ä»¶åˆ†åˆ«ä½¿ç”¨</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default combineReducers(&#123;</span><br><span class="line">  reducer1,</span><br><span class="line">  reducer2,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•ä¼šå‡ºç°<code>No reducer provided for key &#39;xxxReducer&#39;</code><br>è§£å†³æ–¹æ³•:</p>
<ul>
<li>è®©æ¯ä¸ªreducerå‘½åä¸é‡å¤</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const reducer1 = () =&gt; &#123;&#125;;</span><br><span class="line">export default reducer1;</span><br></pre></td></tr></table></figure>

<ul>
<li>ç›´æ¥è¿™æ ·å¯¼å‡º</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export default () =&gt; &#123;&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="reduxä¸æ›´æ–°æ•°æ®é—®é¢˜"><a href="#reduxä¸æ›´æ–°æ•°æ®é—®é¢˜" class="headerlink" title="reduxä¸æ›´æ–°æ•°æ®é—®é¢˜"></a>reduxä¸æ›´æ–°æ•°æ®é—®é¢˜</h4><p><strong>é—®é¢˜ï¼š</strong> åœ¨ <code>component</code> ä¸­ç›´æ¥å¯¹ <code>state</code> æ ‘çš„å€¼è¿›è¡Œä¿®æ”¹ï¼Œå°†ä¿®æ”¹åçš„æ•°æ® <code>action</code> åˆ° <code>reducer</code>ä¸­ï¼Œç»“æœ <code>reducer</code> çš„æ•°æ®æ›´æ–°äº†ï¼Œä½†æ˜¯é¡µé¢å¹¶æ²¡æœ‰é‡æ–°æ¸²æŸ“</p>
<p><strong>åŸå› ï¼š</strong> <code>redux</code> çš„ <code>state</code> æ˜¯å¼•ç”¨ï¼Œç›´æ¥å¯¹ <code>state</code> çš„å€¼è¿›è¡Œæ›´æ”¹æ—¶ï¼Œ<code>store</code> å†…éƒ¨çš„ <code>state</code> å€¼åŒæ ·ä¹Ÿæ”¹å˜äº†ï¼Œè¿™æ ·å¯¼è‡´ <code>redux</code> è®¤ä¸º <code>dispatch</code> å‰å <code>state</code> æ²¡æœ‰æ”¹å˜ï¼Œå°±ä¸ä¼šé‡æ–°æ¸²æŸ“UIï¼Œå®é™…ä¸Š <code>state</code> å·²ç»æ”¹å˜äº†</p>
]]></content>
      <categories>
        <category>React</category>
      </categories>
      <tags>
        <tag>react</tag>
        <tag>redux</tag>
      </tags>
  </entry>
  <entry>
    <title>vitepressè½»é‡çº§blogæ­å»º</title>
    <url>/2023/09/07/vite-blog/</url>
    <content><![CDATA[]]></content>
      <categories>
        <category>Front-end</category>
      </categories>
      <tags>
        <tag>js</tag>
        <tag>blog</tag>
        <tag>vite</tag>
      </tags>
  </entry>
</search>
